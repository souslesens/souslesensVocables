<!DOCTYPE html>
<html lang="en">
<html>
<head>
  <meta charset="utf-8" />
  <title>SouslesensVocables</title>
  <link rel="icon" href="../icons/souslesensIcon.png" />

  <!--   <script src="./js/external/jquery/jquery.min.js"></script>
<script src="./js/external/jquery/jquery-ui.min.js"></script>
<link href="./js/external/jquery/jquery-ui.min.css" rel="stylesheet" type="text/css"/>-->

  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

  <script src="./js/external/async.js" charset="utf-8"></script>

  <script src="js/common.js" charset="utf-8"></script>

  <script src="./js/external/jsTree/jstree.js" charset="utf-8"></script>
  <!--  <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"></script>-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css" />

  <script type="text/javascript" src="./js/external/visjs/vis-network.min.js"></script>
  <link href="./js/external/visjs/vis-network.css" rel="stylesheet" type="text/css" />
  <script src="./js/graph/visjsGraph2.js"></script>
  <script src="./js/graph/canvas2svg.js"></script>
  <script src="./js/graph/SVGexport.js"></script>
  <script src="./js/graph/graphMLexport.js"></script>

  <script src="js/mainController.js"></script>
  <script src="js/graphController.js"></script>
  <script src="js/treeController.js"></script>
  <script src="js/clipboard.js"></script>

  <script src="js/tools/sourceBrowser.js"></script>

  <script src="js/tools/sourceMatcher.js"></script>
  <!--script src="js/tools/evaluate.js"></script-->
  <script src="js/tools/evaluate.js"></script>
  <script src="js/tools/genealogy.js"></script>
  <script src="js/tools/owlSchema.js"></script>
  <script src="js/tools/annotator.js"></script>
  <script src="js/tools/childHood.js"></script>
  <script src="js/tools/importCSV.js"></script>

  <script src="js/tools/blender/blender.js"></script>
  <script src="js/tools/blender/collection.js"></script>
  <script src="js/tools/blender/sourceEditor.js"></script>
  <script src="js/tools/blender/import.js"></script>
  <script src="js/tools/blender/externalReferences.js"></script>
  <script src="js/tools/blender/transform.js"></script>
  <script src="js/tools/SPARQL_endpoint.js"></script>
  <script src="js/tools/lineage/lineage_classes.js"></script>
  <script src="js/tools/lineage/lineage_properties.js"></script>
  <script src="js/tools/lineage/lineage_common.js"></script>
  <script src="js/tools/lineage/lineage_blend.js"></script>
  <script src="js/tools/lineage/lineage_relations.js"></script>
  <script src="js/tools/lineage/lineage_dictionary.js"></script>

  <script src="js/tools/lineage/lineage_decoration.js"></script>

  <script src="js/tools/owlEditor.js"></script>

  <!-- <script src="js/tools/lineage/KGquery.js"></script>-->

  <script src="js/tools/KG/mappings/KGmappings.js"></script>
  <script src="js/tools/KG/mappings/KGmappingGraph.js"></script>
  <script src="js/tools/KG/mappings/KGmappingData.js"></script>
  <script src="js/tools/KG/mappings/KGadvancedMapping.js"></script>
  <script src="js/tools/KG/KGassetGraph.js"></script>
  <script src="js/tools/KG/mappings/KGbuild.js"></script>

  <script src="js/tools/KG/TextAnnotator.js"></script>

  <script src="js/tools/KG/KGcommon.js"></script>
  <script src="js/tools/KG/browser/KGbrowserGraph.js"></script>
  <script src="js/tools/KG/browser/KGbrowserQuery.js"></script>
  <!-- <script src="js/tools/KG/browser/KGbrowserQueryNew.js"></script>-->
  <script src="js/tools/KG/browser/KGbrowser.js"></script>
  <script src="js/tools/KG/browser/KGbrowser_2.js"></script>
  <script src="js/tools/KG/browser/KGbrowserBI.js"></script>
  <script src="js/tools/KG/browser/KGbrowserDataTable.js"></script>
  <script src="js/tools/KG/browser/KGbrowserCustom.js"></script>

  <script src="js/tools/Standardizer.js"></script>

  <script src="js/tools/SQLquery.js"></script>

  <script src="js/tools/admin.js"></script>
  <script src="js/tools/ConfigEditor.js"></script>

  <script src="js/tools/KGcreator.js"></script>
  <script src="js/tools/KGpropertyFilter.js"></script>

  <script src="js/tools/ontologiesStats.js"></script>

  <!-----------private tools--------------->
  <script src="js/customPluginController.js"></script>

  <script src="customPlugins/TotalEnergies/TE_14224_browser/TE_14224_browser.js"></script>
  <script src="customPlugins/TotalEnergies/TE_AssetConfigurator/TE_AssetConfigurator.js"></script>
  <script src="customPlugins/TotalEnergies/TE_AssetConfigurator/TE_AssetDataManager.js"></script>
  <script src="customPlugins/TotalEnergies/TE_AssetConfigurator/TE_SqlTojstreeConnectors.js"></script>

  <script src="config/app_config.js"></script>

  <script src="js/authentification.js"></script>

  <script src="js/sparqlProxies/sparql_proxy.js"></script>
  <script src="js/sparqlProxies/sparql_generic.js"></script>
  <script src="js/sparqlProxies/sparql_SKOS.js"></script>
  <script src="js/sparqlProxies/sparql_OWL.js"></script>
  <script src="js/sparqlProxies/sparql_INDIVIDUALS.js"></script>

  <script src="js/sparqlProxies/sparql_common.js"></script>
  <script src="js/sparqlProxies/sparql_schema.js"></script>

  <!--specific-->
  <script src="js/sparqlProxies/sparql_WORDNET.js"></script>
  <script src="js/sparqlProxies/sparql_ISO_15926.js"></script>
  <script src="js/sparqlProxies/sparql_ISO_15926_part4.js"></script>
  <script src="js/sparqlProxies/sparql_NPD.js"></script>
  <script src="js/tools/orchestrator.js"></script>
  <script src="js/search/searchUtil.js"></script>

  <script src="js/external/socket.io.js"></script>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
  </script>
  <script src="js/socketProxy.js"></script>
  <script src="js/export.js"></script>
  <script src="js/graphTraversal.js"></script>
  <script src="js/external/graph.js"></script>
  <script src="js/external/download.js"></script>

  <script src="js/search/elasticSearchProxy.js"></script>

  <script src="js/external/d3/d3.v3.min.js"></script>
  <script src="js/sunburst.js"></script>

  <link href="https://unpkg.com/@triply/yasgui/build/yasgui.min.css" rel="stylesheet" type="text/css" />
  <script src="https://unpkg.com/@triply/yasgui/build/yasgui.min.js"></script>

  <!--  <script src="js/authentification.js"></script>-->

  <link
    rel="stylesheet"
    type="text/css"
    href="https://cdn.datatables.net/v/dt/dt-1.10.18/b-1.5.4/b-colvis-1.5.4/b-html5-1.5.4/b-print-1.5.4/fc-3.2.5/fh-3.1.4/r-2.2.2/sc-1.5.0/sl-1.2.6/datatables.min.css"
  />

  <script
    type="text/javascript"
    src="https://cdn.datatables.net/v/dt/dt-1.10.18/b-1.5.4/b-colvis-1.5.4/b-html5-1.5.4/b-print-1.5.4/fc-3.2.5/fh-3.1.4/r-2.2.2/sc-1.5.0/sl-1.2.6/datatables.min.js"
  ></script>

  <!-- Bootstrap -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
    crossorigin="anonymous"
  />
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
    integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"
  ></script>
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />

  <script src="https://browser.sentry-cdn.com/5.5.0/bundle.min.js" crossorigin="anonymous"></script>

  <script>


    // Redirect 401 to login page
    $(document).ajaxError(function(e, xhr, settings) {
      if (xhr.status == 401) {
        location.href = "/login";
      }
    });

    $(function() {
      MainController.initConfig(function(err) {
        // sentry/glitchtip
        if (Config.sentryDsnJsFront) {
          if (typeof Sentry == "object") {
            Sentry.init({ dsn: Config.sentryDsnJsFront });
          } else {
            console.warn("Sentry DSN found in config, but library could not be loaded and initialized.");
          }
        }

        authentication.init();

        //  SocketProxy.init()

        if (err) return console.error(err);


        MainController.UI.setCredits();
      });
    });
  </script>
  <style>
      .selectedItem{
          background: #00b7ff;
      }
      #Browse_nodeInfosDiv{



      }
      .Browse_nodeParents{
          font-weight: bold;
      }
  </style>
</head>
<body>
<div style="display: flex; flex-direction: row;justify-content:center;width:100%;height: 100px" />

<input id="Browse_searchAllSourcesTermInput" style="width: 300px;height: 30px;margin: 15px;padding: 5px" value="pump" />

</div>
<div style="display: flex; flex-direction: row;width:100%;height: 800px">
  <div id="Browse_searchListDiv" class="Browse_searchList" style="width: 350px;max-height: 750px;overflow: auto"></div>
  <div id="Browse_indexHitsDiv" class="Browse_indexList"  style="width: 350px;max-height: 750px;overflow: auto"></div>
  <div id="Browse_hitDetailsDiv" class="Browse_hitDetail"  style="width: 500px;max-height: 750px;overflow: auto"></div>
</div>
</body>
<script>

  var currentSearchResult = null;
  var currentHit = null;
  $("#Browse_searchAllSourcesTermInput").keypress(function(e) {
    if (e.which == 13) {
      var term = $("#Browse_searchAllSourcesTermInput").val();
      var exactMatch = $("#Browse_allExactMatchSearchCBX").prop("checked");
      var mode = "fuzzyMatch";
      if (exactMatch) mode = "exactMatch";
      var options =  { parentlabels:true }
      if (!term || term == "") return alert(" enter a word ");
      SearchUtil.getSimilarLabelsInSources(null, null, [term], null, mode, options, function(_err, result) {

        if (_err)
          return alert(err);
        currentSearchResult = result[0].matches;
        currentSearchResult.parentIdsLabelsMap=result.parentIdsLabelsMap

        var html = "<ul>";

        for (var index in currentSearchResult) {
          html += "<li  class= \"Browse_searchList\" id='" + index + "' onclick='listIndexHits(\"" + index + "\")'>" + index + " : " + currentSearchResult[index].length + "</li>";
        }
        html += "</ul>";
        $("#Browse_searchListDiv").html(html);
        $("#Browse_indexHitsDiv").html("");
        $("#Browse_hitDetailsDiv").html("");
      });
    }
  });
function encodeUriForHtmlId(uri){
 var str =btoa(uri).replace(/=/g,"")
  return str
}

  listIndexHits = function(index) {
    var html = "<ul>";
    var distinctIds = {};
    $(".Browse_searchList").removeClass("selectedItem")
    $("#"+index).addClass("selectedItem")
    currentSearchResult[index].forEach(function(hit) {

      if (!distinctIds[hit.id]) {
        distinctIds[hit.id] = 1;

        html += "<li   class=\"Browse_indexList\" id='" + encodeUriForHtmlId(hit.id) + "' onclick='showHitDetails(\"" + index + "|" + hit.id + "\")'>" + hit.label + "</li>";
      }

    });
    html += "</ul>";
    $("#Browse_indexHitsDiv").html(html);
    $("#Browse_hitDetailsDiv").html("");

  };
  showHitDetails = function(hitKey) {
    var array = hitKey.split("|")
    var hit;
    currentSearchResult[array[0]].forEach(function(item){
      if(item.id=array[1])
        hit=item
    })
    if(!hit)
      return console.log("no hit")
    $(".Browse_indexList").removeClass("selectedItem")
    $("#"+encodeUriForHtmlId(hit.id)).addClass("selectedItem")
var html=""
    if(hit.parents) {
      html += "<div class='Browse_nodeParents'>"
      hit.parents.forEach(function(parent, index) {
        if (html != "")
          html += " -> "
        var parentLabel = currentSearchResult.parentIdsLabelsMap[parent]
        if (parentLabel)
          html += parentLabel
      })
      html += "</div>"
    }
   html+="<div  id='Browse_nodeInfosDiv'></div>"
    if (!Config.sources[hit.source].controllerName) {
      Config.sources[hit.source].controllerName = "" + Config.sources[hit.source].controller;
      Config.sources[hit.source].controller = eval(Config.sources[hit.source].controller);
    }
    SourceBrowser.showNodeInfos(hit.source, hit.id, "Browse_nodeInfosDiv", { hideButtons:true })


    $("#Browse_hitDetailsDiv").html(html);

  };

</script>

</html>